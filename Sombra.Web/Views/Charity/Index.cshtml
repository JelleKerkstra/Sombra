@model Sombra.Web.ViewModels.Charity.CharityViewModel

@{ ViewData["Title"] = "Charity"; }

@section Styles{
    <link rel="stylesheet" href="~/css/charity/charity.css" />
    <link rel="stylesheet" media="screen and (min-width: 1200px)" href="~/css/charity/desktop.css" />
    <link rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 1200px)" href="~/css/charity/tablet.css" />
    <link rel="stylesheet" media="screen and (max-width: 768px)" href="~/css/charity/mobile.css" />
}
@section Scripts {
    <script>
        $(document).ready(function () {
            $('#charity-actions-carousel').load('@Url.Action("GetCharityActions", new {PageSize = 50, CharityKey = Model.CharityKey.ToString()})', function () {
                var $carousel = $('.main-carousel').flickity({
                    cellAlign: 'left',
                    contain: true,
                    prevNextButtons: false,
                });

                // Flickity instance
                var flkty = $carousel.data('flickity');
                // elements
                var $cellButtonGroup = $('.button-group--cells');
                var $cellButtons = $cellButtonGroup.find('.button');

                // previous
                $('.button--previous').on('click', function () {
                    $carousel.flickity('previous');
                });
                // next
                $('.button--next').on('click', function () {
                    $carousel.flickity('next');
                });
            });
        });
    </script>
}

<div id="charity-info">
    @*Background picture*@
    <div class="header-image" style="background-image:url(@Model.charity.CoverImage)"></div>
    <div class="main-storyboard">
        @*top*@
        @foreach (string category in @Model.charity.Categories)
        {
            <div class="category">@category</div>
        }
        <div class="kvk_ambi">KvK nummer: @Model.charity.KVKNumber  ANBI nummer: @Model.charity.Anbi</div>
        @*title & story*@
        <div id="about" class="standard-text">
            <div class="container">
                <div class="row about-text">
                    <h3>@Model.charity.Name</h3>
                    <p>@Model.charity.About</p>
                    <div class="donate-btn">
                        <a href="#" class="donateSVG"></a>
                    </div>
                </div>
            </div>
        </div>
        @*Story*@
        <div id="the_story">
            <div class="story_image" style="background-image:url(@Model.charityAction.Image)">
                <div class="story_gradient">
                    <div class="text_container">

                        <span>@Model.charityAction.Name, initiatiefnemer</span>
                        <h3>
                            @Model.charityAction.Description
                        </h3>

                        <div class="story-btn-holder">
                            <div class="secondary-button">
                                <a href="#"></a> @*/charityaction/id=*@
                                <label>Lees dit verhaal</label>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        @*Active acitons*@
        <div id="acties">
            <h3 class="title">Lopende acties</h3>
            <div class="slider-container">
                <div id="charity-actions-carousel" class="main-carousel"></div>
                <div class="button button--previous"></div>
                <div class="button button--next"></div>
            </div>
            <div class="action-buttons">
                <div class="all-actions">
                    <a href="#"></a>
                    <span class="monster-700">Bekijk alle acties</span>
                </div>
                <div class="make-actions">
                    <a href="#"></a>
                    <span class="monster-700">Start een actie</span>
                </div>
            </div>
        </div>
    </div>
    @*logo*@
    <div class="container">
        @*If only a logo is used we can remove the Fill-7*@
        <img class="Fill-1" src="../../Assets/shape-frame.svg">
        <div class="Fill-7">@Model.charity.Name</div>
    </div>
</div>
@*TODO Fix overflow main-storyboard and donations. main-storyboard has fixed height and absolute values*@
<div id="donations">
    <div class="donations-relative">
        <span class="main-text">DEZE WEEK DONEERDER</span>  <span class="ammount-people">@Model.donationsToCharity.DonatedToCharity</span>  <span class="main-text">MENSEN TOTAAL</span>  <span class="ammount-people">&euro;@Model.donationsToCharity.TotalDonations</span>
        <div class="absolute1"><span class="main-text">DONEREN VANAF</span><p><span class="numbers">&euro; 1</span></p></div>
        <div class="absolute2"><span class="main-text">GEMIDDELDE DONATIE</span><p><span class="numbers">&euro; @Model.donationsToCharity.AvarageDonation</span></p></div>
        <div class="absolute3"><span class="main-text">LAATSTE DONATIE</span><p><span class="numbers">&euro; @Model.donationsToCharity.LatestDonation</span></p></div>
    </div>
</div>
